---
title: "Women's Soccer Data"
---

We'll use this notebook to explore some NCAA women's soccer data and [our questions](https://docs.google.com/spreadsheets/d/1G1AjH2iS6kj3kKHCRi0XVy5Lcm-rahJkeTAToVh9J1g/edit?gid=0#gid=0). First, let's load the tidyverse library:

```{r}
library(tidyverse)
```

We'll want to start with 2025 match data, which is located in [this GitHub repository](https://github.com/dwillis/NCAAWomensSoccerData). We can load the match data directly from GitHub using `read_csv`:


```{r}
matches_2025 <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2025.csv")
```

Let's take a look at this data to see what it contains, using `head` and `glimpse`:

```{r}
head(matches_2025)
glimpse(matches_2025)
```

Now, onto the questions using aggregates, which means `group_by` and `summarize`:

1. How many shots in total has Maryland attempted and how many have been on goal? Calculate a percentage of shots on goal.

```{r}
matches_2025 |> 
  filter(team == "Maryland Terrapins, Terps") |> 
  group_by(team) |> 
  summarize(
    total_shots = sum(sh_att),
    shots_on_goal = sum(so_g),
    pct_shots_on_goal = shots_on_goal / total_shots * 100
  )
```

## The Terps took a total of 166 shots, but only 77 were on goal. That means that less than half (around 46.4%) of their total shots were on goal.

2. What about the same shot stats from last season's first four games? You'll need to load the matches from 2024 - just change the season in the URL - and filter by date to find the first four games.

```{r}
matches_2024 <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2024.csv")
```
```{r}
matches_2024 |> 
  filter(team == "Maryland Terrapins, Terps", date <= "2024-08-25") |>
  group_by(team) |>
  summarize(
    total_shots = sum(sh_att),
    shots_on_goal = sum(so_g),
    pct_shots_on_goal = shots_on_goal / total_shots * 100
  )
```
## During the first four games of 2024, Terps WSOC took a total of 38 shots, 20 of which were on goal. That means about 52.6% of their shots were on goal to start last season. 

3. Maryland started 2022 with 4 draws. Have any other teams had as many this season?

```{r}
matches_2025 |>
filter(outcome == "Draw", date <= "2025-09-01") |>
group_by(team) |>
summarize(
  total = n()) |>
arrange(desc(total))

```

## Yes, we can see that by September 1st of 2025 (the same date the Terps achieved their fourth tie in 2022), that Drexel also had four ties, while Cal Poly had five.

4. How many total corner kicks has Maryland had so far this season and how many have its opponents have? Calculate the difference between the two totals for every team using group_by, summarize and mutate, then filter to find Maryland's totals.

```{r}
corners_2025 <- matches_2025 |>
filter(date <= "2025-09-04") |>
group_by(team) |>
summarize(
  team_corners = sum(corners),
  opponent_corners = sum(defensive_corners),
  corners_plus_minus = team_corners - opponent_corners) |>
arrange(desc(corners_plus_minus))
```

## The chart above shows every team ranked in order in terms of their plus/minus ratio on corner kicks. How did Maryland fare? 

```{r}
corners_2025 |>
filter(team == "Maryland Terrapins, Terps")
```
## The Terps are just barely staying above water with a +1 differential. 

5. What's the most interesting thing you've seen from these questions?

Not only does the record show it, but the stats reflect it as well: Maryland is excellent in the beginning of the season against poor competition, but has consistently been amongst the worst teams in the Big Ten once conference play begins.


### WOMEN'S SOCCER NOTEBOOK ASSIGNMENT ENDS HERE


### WOMEN'S SOCCER TEST ASSIGNMENT BEGINS HERE


```{r}
matches_2025 <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2025.csv") |> mutate(diff = team_score - opponent_score, total_goals = goals + defensive_goals) |> filter(date <'2025-09-18')

matches_2024 <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2024.csv") |> mutate(diff = team_score - opponent_score, total_goals = goals + defensive_goals) |> filter(date < '2024-09-18')
```
t-test

```{r}
t.test(matches_2024$total_goals, matches_2025$total_goals)
```
## Scoring is down in 2025 compared to 2024, but it is hardly a difference. Our null hypothesis, that there is no significant difference in scoring between the two years, is correct. Our p-value confirms that there is no statistical significance. The only reason there might be a slight difference is because up until the same date in both years, 2025 has 47 more matches played amongst all teams. Now, we;ll take a look to see if there is any difference between Maryland's team across both years.

```{r}
terps_2025 <- matches_2025 |>
filter(team == "Maryland Terrapins, Terps")

terps_2024 <- matches_2024 |>
filter(team == "Maryland Terrapins, Terps")
```


```{r}
t.test(terps_2024$total_goals, terps_2025$total_goals)
```
## Once again, there is hardly a difference. The one reason why the scoring might be higher in 2024 is because there was one more game played by the Terps by that time last year. But once again, our p-value shows us that it is not of statistical significance.

### WOMEN'S SOCCER TEST ASSIGNMENT ENDS HERE




```{r}
swac_teams <- c("Alabama A&M Bulldogs", "Alabama St. Lady Hornets", "Alcorn Lady Braves", "Ark.-Pine Bluff Lady Lions", "Grambling Lady Tigers", "Jackson St. Lady Tigers", "Mississippi Val. Devilettes", "Prairie View Lady Panthers", "Southern U. Lady Jaguars", "Texas Southern Lady Tigers")


swac_matches <- matches_2025 |> 
  filter(team %in% swac_teams)


big10 <- c("Nebraska Huskers", "Iowa Hawkeyes", "Minnesota Golden Gophers", "Illinois Fighting Illini", "Northwestern Wildcats", "Wisconsin Badgers", "Indiana Hoosiers", "Purdue Boilermakers", "Ohio St. Buckeyes", "Michigan Wolverines", "Michigan St. Spartans", "Penn St. Nittany Lions", "Rutgers Scarlet Knights", "Maryland Terrapins, Terps", "Southern California Trojans", "UCLA Bruins", "Washington Huskies", "Oregon Ducks")

big10_matches <- matches_2025 |> 
  filter(team %in% big10)


matches_2025 |>
  group_by(home_away) |> 
  summarise(
    mean_diff = mean(diff),
    mean_opp_goals = mean(defensive_goals),
    mean_sog = mean(so_g),
    mean_opp_sog = mean(defensive_so_g)
    )

swac_matches |> 
  summarise(
    mean_diff = mean(diff),
    mean_opp_goals = mean(defensive_goals),
    mean_sog = mean(so_g),
    mean_opp_sog = mean(defensive_so_g)
    )

big10_matches |> 
  summarise(
    mean_diff = mean(diff),
    mean_opp_goals = mean(defensive_goals),
    mean_sog = mean(so_g),
    mean_opp_sog = mean(defensive_so_g)
    )

```
## Correlations & Regressions

```{r}
correlations <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2024.csv")

newcorrelations <- correlations |> 
  mutate(
    differential = goals - defensive_goals
    )

newcorrelations |> summarise(correlation = cor(differential, fouls, method="pearson"))

newcorrelations |> summarise(correlation = cor(differential, yellow_cards, method="pearson"))

fit <- lm(differential ~ fouls, data = newcorrelations)
summary(fit)

newcorrelations |> 
  summarise(correlation = cor(differential, so_g, method="pearson"))

net <- lm(differential ~ so_g, data = newcorrelations)
summary(net)
```

### 2025 Version
```{r}
correlations25 <- read_csv("https://raw.githubusercontent.com/dwillis/NCAAWomensSoccerData/main/data/ncaa_womens_soccer_matchstats_2025.csv")

newcorrelations <- correlations25 |> 
  mutate(
    differential = goals - defensive_goals,
    so_g_diff = so_g - defensive_so_g
    )

newcorrelations |> summarise(correlation = cor(differential, defensive_so_g, method="pearson"))

terps25 <- newcorrelations |> 
  filter(team == "Maryland Terrapins, Terps")

defensive_sog_model <- lm(differential ~ defensive_so_g, data = newcorrelations)
summary(defensive_sog_model)

terps_defensive_sog_model <- lm(differential ~ defensive_so_g, data = terps25)
summary(terps_defensive_sog_model)
```
### Women's Soccer Correlation Story Pitch
The correlation between defensive shots on goal allowed and game outcome for Maryland Women's Soccer is statistically significant. In all four of their losses so far this season, their shots on goal differential has been heavily in the negatives, with each being at least -5. In three of their four losses, the Terps only got one shot on goal. However, what's interesting about this is that in their latest game against Purdue, the Terps were once again in the negatives - -4 - but they won. What specifically did they do to overcome what has typically buried them in past games?
